# 再レンダリングとその仕組み

## 再レンダリングが起こる条件
主に３つあり、
1. stateが更新された時
2. propsが更新された時
3. 再レンダリングされたコンポーネント配下の全て

1,2については前述のとおりで、３に関しては１つのコンポーネントが再レンダリングしたらその下にあったファイルも全て再レンダリングしてしまうというもの。これはめちゃくちゃ効率が悪いね。

## レンダリングの最適化１（memo化）
上の3番目の条件をコード上で試してみた。実際app.jsx配下のコンポーネントが再レンダリングされてしまっていた。
memo化というのをすることで配下の再レンダリングを行わないようにできる。あらかじめ同じ情報を保存できるかららしい

## レンダリング最適化２(useCallback)
これで余計な再レンダリングは行われなくなったが、関数をpropsに渡すときに関数の再生成が行われるため。
useCallbackを使うことで関数のmemo化をして余計な再レンダリングを行わずに済む。

## 変数のメモ化(useMemo)
メジャーではないけど変数のメモ化もある

## まとめ
再レンダリングはstate・propsが更新されたときに起こるほか、親コンポーネントが更新された際も子コンポーネントが更新される
memo化と呼ばれる処理内容を保存できる機能で再レンダリングを抑制できる。
コンポーネントはmemo,関数はuseCallback,変数はuseMemo